# 20 区块链项目详解：比特股BTS

    前面两篇我们都聊了只能合约的话题，智能合约可以说是当下区块链最热的概念了，
    在很多人眼里，没有智能合约的区块链价值就大打折扣。

    今天我们就来聊一个没有开放式智能合约的项目：比特股。

    比特股发行于2014年，虽然没有引入智能合约的概念，但它提供了极为丰富的金融类工具，
    比特股上所有的金融合约都是事先在比特股里写好的，所以说它本身就是一个智能合约的合集。

## 什么是比特股

    比特股是一个去中心化平台的、7*24小时不间断运行的、基于区块链技术的去中心化交易平台。
    它具备了区块链的优点，也是第一个有关稳定数字货币的尝试。
    目前比特股提供了若干核心的金融服务，例如支付、撮合交易、资产存托等服务。

    相较于传统的金融IT系统，它的服务器是由分散在世界各地的受托人（Delegated）维护的，
    即使其中一些人被攻击也不会导致整个服务宕机。

    比特股目前全网在线的服务器有27个，由于DPoS共识机制提供了较好的交易吞吐性能，
    理论上比特股的TPS可以到达10万，这也是比特股在技术上区别于其他区块链项目的最显著特征。
    比特股良好的TPS也是在为它的功能服务。

    这里就大致可以看出比特股平台的性质了。

    首先，比特股是一个交易平台，所以它对时间是比较敏感的。大家都希望下单之后快速成交，
    所以高TPS是一个交易平台最基本的需求。

    其次，比特股是去中心化的交易平台，目前流行的中心化交易平台最大的问题就是资金管理系统和
    撮合系统都是由同一家公司控制的。

    然而在传统的证券交易领域，证券登记和交易撮合是两个不同的主体，它们之间是协作关系，
    共同受到证券会的管辖。

    所以，如果你的数字货币存在中心化交易平台，你的交易撮合也由它来控制，就会因为流程不透明，
    存在很多不确定因素。
    这里的交易撮合指的就是交易双方挂出买单和卖单，系统完成撮合匹配直至最终成交的过程。

    比如交易平台跑路、黑客攻击、资产莫名丢失，或者撮合过程中，交易对手方是谁，是否有交易内幕，
    都缺乏可信的确认方法。这些情况都会带来较大的风险。

## 比特股的两个机制

    那么比特股是如何设计中心化交易来避免上述风险的呢？

    比特股作为一个去中心化的交易所，它有两个机制来避免这种风险。

    第一，资金出入是由承兑商来支持的，人人都可以成为承兑商，也就是人人承兑。
    第二，锚定机制提供了稳定货币的出入金过程，也保证了比特股的出入资金和交易撮合是分离的，避免了中心化交易平台的弊端。

    这个过程可以简述为：法币<->锚定资产（系统内置货币）<->BTS的相互转换。
    从法币到系统内置货币用到了人人承兑机制，从系统内置货币到BTS的转换用到了锚定机制。
    BTS就是比特股平台上流通的平台代币，它的比特币一样有类似的总量上限设定，大约在36亿左右，目前流通的有26亿左右。
    接下来就来详细看看比特股的两个机制。

### 人人承兑

    人人承兑机制提供了法币到系统内置货币的转换，比特币系统内置了多种货币，用来锚定各种法币。比如bitCNY、bitUSD、bitEUR等等，这些系统内置货币可以与CNY、USD、EUR按照1:1兑换。而人人承兑机制就提供了锚定货币和真实法币之间的相互转换。

    它在机制上有点类似比特币的场外交易。所谓场外交易，也就是没有中心化撮合中介，交易双方自行议价成交。

    例如，我想要买比特币，就可以找到一个专门的承兑商，直接把这个钱支付给承兑商，然后承兑商来把比特币支付给我。人人承兑在逻辑上差不多，它提供了一个法币和锚定货币的兑换手段，而且是去信任地进行。
    所以从资金托管的角度来看，比特股与中心化交易所有很大的区别。如果你在一个中心化的交易所里充值，那么你只能信任这个交易所，它在保管你的钱；要相信在你要提现的时候，它会愿意帮你提现。
    但是人人承兑就不一样了，人人承兑可以在一个承兑商处买入锚定货币，然后在另一个承兑商处换回法币。而且实际上，每个参与的人都既可以是买家也可以是卖家，也就是每个人都可以成为承兑商的角色，这样市场就会非常地灵活。当然市场上也存在专门提供充值和提现服务的“承兑商”，靠收取手续费来盈利。
    当然，这样的方案也并不是绝对安全的，人人承兑的机制让比特股锚定货币和法币之间的转换相对更加安全有效，缩短了出金入金的周期，提升了安全性。另外，如果资金在比特股系统之内，整个使用期间是没有人能够威胁到你的资产的。

### 锚定机制

    锚定机制是一种去中心化的抵押机制。我们刚才提到了比特股系统内置的多种锚定货币，这些货币的发行商就是系统自身。系统把锚定货币发给抵押了BTS的用户，数量由BTS代币的数量决定。

    也就是说，任何持有BTS的人都可以用它来抵押生产系统的内置货币，而且抵押规则要求用两倍价值的BTS进行抵押。而且因为抵押价值是锚定货币价值的2倍，所以锚定币的风险是比较低的。这种抵押担保机制保障了锚定货币的价值，并且从技术层面来讲，比特股的共识机制保证了恶意修改锚定货币数量的造假行为是不可行的。

    如果BTS价格下跌，系统就会自动把抵押产生的BTS卖掉。如果没有没有暴跌50%以上，系统都可以在交易市场上获得锚定货币。而如果跌幅超过了50%，系统会以一成的价格卖出抵押的BTS，直至卖够抵押产生的锚定货币。

    从操作层面来看，支付锚定货币实际上消耗的还是BTS，但是需要消耗多少，就以实时价格买入BTS。买入操作是瞬间完成的，在比特股上有专门的代笔资金池来提供给，实时价格由系统为之决定，所以使用者不同承担任何比特股价格波动带来的风险。

    至此，稳定的锚定货币就产生了，它兼具了区块链的有点，而且是一种稳定货币。

    除了抵押之外，还有强制平仓、强制清算这种机制来保证价值和实际所锚定的货币等价。
    
## 比特股的技术概览

    比特股的核心代码是由Cryptonomex公司开源的石墨烯（Graphene）框架演变而来，它的主体代码是C++编写的，里面使用了大量的boost库组件。

    除了比特股核心，还有一套Javascript编写的UI产品，叫做Bitshares-UI，相当于一个轻量级的基于浏览器的钱包。这个钱包将用户密钥存储在本地浏览器上，并且密钥是通过用户密码加密并存储在浏览器数据库的。

    发送交易时，先本地对交易进行签名，再传输到代理服务器上，由服务器广播至比特股全网。
    
    比特股所使用的共识算法我们已经讲过，就是DPoS，所以比特股有见证人节点，目前全网有101个。从101个见证人节点中，社区又选出了11为理事会代表，理事会接收社区投票然后形式比特股上的治理权。
    比特股使用的也是ECC椭圆曲线非对称加密算法。

    值得一提的是，比特股并没有类似比特币地址的概念，在比特股上取而代之的是可读的账号系统，这些账号与私钥一一绑定，可读账号就是比特股系统中的地址。